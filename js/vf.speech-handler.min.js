function stt(t,e,n){if(0==e){let t=Math.floor(10*Math.random()),e=vfAlternativeResponse.randomLib;0==respTimeOut&&(vfAudioPlayer.configure(e[t]),vfAudioPlayer.play(),respTimeOut=!0,setTimeout(function(){respTimeOut=!1},6e3))}}function vfGcpStt(t){return new Promise(function(e,n){if(!(vfSttLanguageContext.gcp.endPoint&&vfSttLanguageContext.gcp.key&&vfSttLanguageContext.gcp.langCode&&void 0!==t&&t))return void n(null);let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState)try{let t=JSON.parse(this.response);if(200===this.status){errcnt=0;let i=void 0!==t&&t instanceof Object&&"results"in t?t.results:[],o=i&&i.length>0&&i[0]instanceof Object?i[0]:{},a="alternatives"in o&&o.alternatives?o.alternatives:[],r=a.length>0&&a[0]instanceof Object?a[0]:{},l="transcript"in r&&r.transcript?r.transcript:null;void 0!==l&&l?e(l):n(null)}else{let i="error"in t?t.error:{},o="message"in i&&i.message?i.message.toLowerCase():"";if(errcnt<1&&o&&-1!==o.indexOf("api key"))errcnt++,vfRefreshVoiceServicesKeys().then(function(t){vfSttLanguageContext.gcp.key=t,vfGcpStt().then(function(t){t?e(t):(errcnt=0,n(null))}).catch(function(t){errcnt=0,n(null)})}).catch(function(t){alert(t),errcnt=0,n(null)});else{if(errcnt=0,0==errcnt){let t=Math.floor(10*Math.random()),e=vfAlternativeResponse.randomLib;vfAudioPlayer.configure(e[t]),vfAudioPlayer.play()}n(null)}}}catch(t){n(null)}},i.onerror=function(t){n(null)},i.open("POST",vfSttLanguageContext.gcp.endPoint+vfSttLanguageContext.gcp.qs.key+vfSttLanguageContext.gcp.key,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8");let o={config:{encoding:"ENCODING_UNSPECIFIED",languageCode:vfSttLanguageContext.gcp.langCode,enableWordTimeOffsets:!1},audio:{content:t}};i.send(JSON.stringify(o,null,!0))})}function vfLogServiceCall(t=0){try{let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let t=JSON.parse(this.responseText);vfServiceLogs.updatedAt=t.updatedAt||vfServiceLogs.updatedAt,vfServiceLogs.currentValue=t.currentValue||vfServiceLogs.currentValue,vfServiceLogs.lastValue=t.lastValue||vfServiceLogs.lastValue}},e.open("POST",vfAjaxObj.ajax_url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("action=vf_log_service_call&_ajax_nonce="+vfAjaxObj.nonce+"&updateLastValue="+t)}catch(t){}}function vfGetCurrentHostURL(){var t=null;try{if(void 0===window.location||void 0===window.location.hostname||void 0===window.location.protocol)return vfGetHostName();var e=window.location.protocol,n=window.location.hostname;t=e+"//"+n}catch(e){t=vfGetHostName(),console.log("Something went wrong while discovering current domain.")}return t}function vfGetHostName(){return vfHostName}function vfRefreshVoiceServicesKeys(){return new Promise(function(t,e){let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState)if(200===this.status){let n=JSON.parse(this.response);if(void 0===n&&e(vfErrorLibrary.outOfService),vfSttLanguageContext.gcp.stt&&"gStt"in n&&n.gStt)return void t(n.gStt);e(vfErrorLibrary.outOfService)}else e(vfErrorLibrary.outOfService)};let i="?action=vf_refresh_access_keys&_ajax_nonce="+vfAjaxObj.keys_nonce;n.open("GET",vfAjaxObj.ajax_url+i,!0),n.onerror=function(t){e(vfErrorLibrary.outOfService)},n.send(null)})}function vfFormatEmail(t=null){let e=t;try{if(t&&null!==t){let n=t.toLowerCase();n=n.replace(/dot/gi,".").replace(/at/gi,"@").replace(/underscore/gi,"_").replace(/dotcom/gi,".com").replace(/dotorg/gi,".org").replace(/dotnet/gi,".net").replace(/dotint/gi,".int").replace(/dotedu/gi,".edu").replace(/ /g,""),e=n}}catch(n){e=t}return e}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var respTimeOut=!1,errcnt=0;let vfHostName=void 0!==vf.vfCurrentHostName?vf.vfCurrentHostName:null;var vfAudioPlayer={htmlAudioElement:document.createElement("AUDIO"),lastFilePath:null,antiMuteButtonPlaybacks:[vfSilenceSoundPath],isAntiMutePlayback:!1,configure:function(t=null,e=null){try{let n=void 0!==t&&t?t:null;if(n){let t=vfIsMuteSimon?vfSilenceSoundPath:n;this.htmlAudioElement.src=vf._vfPath+t,this.htmlAudioElement.preload="auto",this.lastFilePath=n,-1!==this.antiMuteButtonPlaybacks.indexOf(n)?this.isAntiMutePlayback=!0:this.isAntiMutePlayback=!1}else this.htmlAudioElement.src="",this.isAntiMutePlayback=!1;this.htmlAudioElement.onplay=function(){}.bind(this),this.htmlAudioElement.onended=function(){this.htmlAudioElement.src="",this.isAntiMutePlayback=!1,n&&"function"==typeof e&&(e(),e=null)}.bind(this),this.htmlAudioElement.onerror=function(){this.isAntiMutePlayback=!1}.bind(this),this.htmlAudioElement.onplaying=function(){}.bind(this)}catch(t){this.clear(),this.isAntiMutePlayback=!1}},play:function(){try{this.htmlAudioElement&&this.htmlAudioElement.src&&this.htmlAudioElement.play().catch(function(t){console.log("VDN Exception: Failed to play audio.")})}catch(t){this.clear()}},stop:function(){try{this.clear()}catch(t){this.clear()}},clear:function(){try{if(this.htmlAudioElement){let t=isNaN(this.htmlAudioElement.duration)?0:this.htmlAudioElement.duration;this.htmlAudioElement.currentTime=t}this.lastFilePath=null}catch(t){this.lastFilePath=null,this.isAntiMutePlayback=!1}},isPlaying:function(){let t=isNaN(this.htmlAudioElement.currentTime)?0:this.htmlAudioElement.currentTime,e=isNaN(this.htmlAudioElement.duration)?0:this.htmlAudioElement.duration;return t<e}};