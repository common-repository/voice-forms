window.onload=(e=>{(function(){"use strict";function e(){try{window.vfMicTimeoutIdentifier&&(clearTimeout(window.vfMicTimeoutIdentifier),window.vfMicTimeoutIdentifier=null)}catch(e){}}function t(e){return e=parseInt(e,10),isNaN(e)||null==e?0:e}function i(e=null){var t=!1;try{var i=document.querySelectorAll("button.voice-forms-button");if(null==i||null==e)return t;for(var o=0;o<i.length;o++){var n=i[o].className,l=i[o].getAttribute("id");if(void 0!==n&&""!=n.trim()&&(-1!=n.indexOf("listening")&&e!=l)){t=!0;break}}}catch(e){t=!1}return t}function o(e){let t=0,i=0;e.clientHeight>=80&&(t=e.clientHeight+15,i=-t/6),e.clientHeight>=60?(t=e.clientHeight+12,i=-t/5):e.clientHeight>=30?(t=e.clientHeight+10,i=-t/4):(t=e.clientHeight+8,i=-t/3.5);const o=document.createElement("div");o.setAttribute("id","pulse"),o.setAttribute("class","pulse-color"),o.style.width=t+"px",o.style.height=t+"px",o.style.left=i+"px";const n=document.createElement("div");return n.setAttribute("id","pulse-rate"),n.setAttribute("class","pulse-color"),n.style.width=t+"px",n.style.height=t+"px",n.style.left=i+"px",{vfPulse:o,vfPulseRate:n}}function n(){const t=document.getElementById("flt-mic");if(null!=t){const l=t.getElementsByClassName("my-icon-wrapper")[0].getElementsByTagName("i")[0],r=o(l);if("webkitSpeechRecognition"in window&&!0===vfClientInfo.chrome){let o=new webkitSpeechRecognition;function n(){H=!1,D||(K=F,t.classList.remove("listening"),l.classList.remove("my-icon-animation-wrapper"),l.removeChild(r.vfPulse),l.removeChild(r.vfPulseRate),void 0!==K&&0!=K.length?(T.value=K,vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){}),vfAudioPlayer.play(),setTimeout(()=>{I.submit()},2e3)):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask))}o.continuous=!0,o.interimResults=!0,o.onstart=function(){H=!0},o.onerror=function(e){t.classList.remove("listening"),H=!1,l.classList.remove("my-icon-animation-wrapper"),l.removeChild(r.vfPulse),l.removeChild(r.vfPulseRate),"no-speech"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),D=!0),"audio-capture"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),D=!0),"not-allowed"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),D=!0)},o.onend=function(){A&&n()},o.onresult=function(e){let t="";if(void 0===e.results)return o.onend=null,o.stop(),vfAudioPlayer.configure(vfAlternativeResponse.micConnect),void vfAudioPlayer.play();let i=e.results.length;for(let l=e.resultIndex;l<i;++l)e.results[l].isFinal?(F=e.results[l][0].transcript,0==A&&(n(),o.stop())):t+=e.results[l][0].transcript},t.addEventListener(p,function(a){!0!==i(t.getAttribute("id"),t)&&(H?(e(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),0==A&&(n(),o.stop())):(t.classList.add("listening"),l.classList.add("my-icon-animation-wrapper"),l.appendChild(r.vfPulse),l.appendChild(r.vfPulseRate),a.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),K="",H=!0,o.lang=vfSttLanguageContext.gcp.stt?vfSttLanguageContext.gcp.langCode:"en-US",o.start(),D=!1,e(),window.vfMicTimeoutIdentifier=setTimeout(function(){let e=t.classList;e&&e.contains("listening")&&t.click()},u)))})}else t.addEventListener(p,function(o){function n(){return void 0===vf.vfXApiKey||null===vf.vfXApiKey?(vfAudioPlayer.configure(vfAlternativeResponse.unavailable),vfAudioPlayer.play(),!1):H?(e(),vfAudioRecorder.stop(),vfStopAudio(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),t.classList.remove("listening"),l.classList.remove("my-icon-animation-wrapper"),l.removeChild(r.vfPulse),l.removeChild(r.vfPulseRate),T.placeholder=vfMessages.transcribeText,vfAudioRecorder.getBuffers(function(e){vfSttLanguageContext.gcp.stt?vfAudioRecorder.exportMonoWAV(function(e){vfAudioRecorder.convertBlobToBase64(e).then(function(e){vfGcpStt(e).then(function(e){T.value=e,vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){}),vfAudioPlayer.play(),setTimeout(()=>{I.submit()},2e3)}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask})}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask})}):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask)}),void(H=!1)):(t.classList.add("listening"),l.classList.add("my-icon-animation-wrapper"),l.appendChild(r.vfPulse),l.appendChild(r.vfPulseRate),o.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),K="",H=!0,vfAudioRecorder.clear(),vfAudioRecorder.record(t),e(),void(window.vfMicTimeoutIdentifier=setTimeout(function(){let e=t.classList;e&&e.contains("listening")&&t.click()},u)))}(!0===vfClientInfo.ios||vfClientInfo.iosSafari&&!vfClientInfo.chrome&&!vfClientInfo.firefox||vfClientInfo.windows&&vfClientInfo.firefox)&&(vfAudioPlayer.configure(vfSilenceSoundPath),vfAudioPlayer.play()),!0!==i(t.getAttribute("id"),t)&&(vfAudioRecorder&&vfAudioContext?n():vfInitAudio(function(e){if(!vfAudioRecorder||!vfAudioContext)return T.placeholder=vfMessages.micNotAccessible,!1;n()}))},!1)}}function l(e){"add"==e?(E.classList.add("listening"),E.classList.add("singleClick"),B.classList.add("singleClick")):"remove"==e&&(E.classList.remove("listening"),E.classList.remove("singleClick"),B.classList.remove("singleClick"))}function r(e){if(vf.vfFloatingMic&&"yes"===vf.vfFloatingMic){var t="OtherKey"==vf.vfKeyboardSpecialKey?vf.vfKeyboardMicSwitch:"Space"==vf.vfKeyboardSpecialKey?" ":vf.vfKeyboardSpecialKey,i=0;window.addEventListener("keydown",o=>{let n=o.target;"INPUT"!==n.tagName&&o.key==t&&(i++,o.preventDefault(),2==i&&("single"==e?E.click():"double"==e&&(R.classList.contains("vf-widget-visible")?M.click():(E.click(),M.click())),i=0))})}}function a(){if(b.classList.remove("vfWidgetChatWrapper"),"webkitSpeechRecognition"in window&&!0===vfClientInfo.chrome){let o=new webkitSpeechRecognition;function t(){H=!1,D||(K=F,l("remove"),void 0!==K&&0!=K.length?(T.value=K,vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){}),vfAudioPlayer.play(),setTimeout(()=>{I.submit()},2e3)):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask))}o.continuous=!0,o.interimResults=!0,o.onstart=function(){H=!0},o.onerror=function(e){l("remove"),H=!1,"no-speech"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),D=!0,T.placeholder=vfMessages.unableToHear),"audio-capture"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),D=!0,T.placeholder=vfMessages.micNotAccessible),"not-allowed"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),D=!0,T.placeholder=vfMessages.browserDenyMicAccess)},o.onend=function(){A&&t()},o.onresult=function(e){let i="";if(void 0===e.results)return o.onend=null,o.stop(),T.placeholder=vfMessages.unableToHear,vfAudioPlayer.configure(vfAlternativeResponse.micConnect),void vfAudioPlayer.play();let n=e.results.length;for(let l=e.resultIndex;l<n;++l)e.results[l].isFinal?(F=e.results[l][0].transcript,0==A&&(t(),o.stop())):i+=e.results[l][0].transcript},E.addEventListener(p,function(n){!0!==i(M.getAttribute("id"),M)&&(H?(e(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),0==A&&(t(),o.stop())):(l("add"),n.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),K="",H=!0,o.lang=vfSttLanguageContext.gcp.stt?vfSttLanguageContext.gcp.langCode:"en-US",o.start(),D=!1,e(),window.vfMicTimeoutIdentifier=setTimeout(function(){let e=E.classList;e&&e.contains("listening")&&E.click()},u)))})}else E.addEventListener(p,function(t){function o(){return void 0===vf.vfXApiKey||null===vf.vfXApiKey?(vfAudioPlayer.configure(vfAlternativeResponse.unavailable),vfAudioPlayer.play(),!1):H?(e(),vfAudioRecorder.stop(),vfStopAudio(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),l("remove"),T.placeholder=vfMessages.transcribeText,vfAudioRecorder.getBuffers(function(e){vfSttLanguageContext.gcp.stt?vfAudioRecorder.exportMonoWAV(function(e){vfAudioRecorder.convertBlobToBase64(e).then(function(e){vfGcpStt(e).then(function(e){T.value=e,vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){}),vfAudioPlayer.play(),setTimeout(()=>{I.submit()},2e3)}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask})}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask})}):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask)}),void(H=!1)):(l("add"),t.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),K="",H=!0,vfAudioRecorder.clear(),vfAudioRecorder.record(E),e(),void(window.vfMicTimeoutIdentifier=setTimeout(function(){let e=E.classList;e&&e.contains("listening")&&E.click()},u)))}(!0===vfClientInfo.ios||vfClientInfo.iosSafari&&!vfClientInfo.chrome&&!vfClientInfo.firefox&&!vfClientInfo.edge||vfClientInfo.windows&&vfClientInfo.firefox)&&(vfAudioPlayer.configure(vfSilenceSoundPath),vfAudioPlayer.play()),!0!==i(E.getAttribute("id"),M)&&(vfAudioRecorder&&vfAudioContext?o():vfInitAudio(function(e){if(!vfAudioRecorder||!vfAudioContext)return T.placeholder=vfMessages.micNotAccessible,!1;o()}))},!1)}function s(){if("webkitSpeechRecognition"in window&&!0===vfClientInfo.chrome){let o=new webkitSpeechRecognition;function t(){H=!1,D||(K=F,M.classList.remove("listening"),void 0!==K&&0!=K.length?(T.value=K,vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){}),vfAudioPlayer.play(),setTimeout(()=>{I.submit()},2e3)):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask))}o.continuous=!0,o.interimResults=!0,o.onstart=function(){H=!0},o.onerror=function(e){M.classList.remove("listening"),H=!1,"no-speech"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),D=!0,T.placeholder=vfMessages.unableToHear),"audio-capture"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),D=!0,T.placeholder=vfMessages.micNotAccessible),"not-allowed"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),D=!0,T.placeholder=vfMessages.browserDenyMicAccess)},o.onend=function(){A&&t()},o.onresult=function(e){let i="";if(void 0===e.results)return o.onend=null,o.stop(),T.placeholder=vfMessages.unableToHear,vfAudioPlayer.configure(vfAlternativeResponse.micConnect),void vfAudioPlayer.play();let n=e.results.length;for(let l=e.resultIndex;l<n;++l)e.results[l].isFinal?(F=e.results[l][0].transcript,0==A&&(t(),o.stop())):i+=e.results[l][0].transcript},M.addEventListener(p,function(n){!0!==i(M.getAttribute("id"),M)&&(H?(e(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),0==A&&(t(),o.stop())):(M.classList.add("listening"),n.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),K="",H=!0,o.lang=vfSttLanguageContext.gcp.stt?vfSttLanguageContext.gcp.langCode:"en-US",o.start(),D=!1,e(),window.vfMicTimeoutIdentifier=setTimeout(function(){let e=M.classList;e&&e.contains("listening")&&M.click()},u)))})}else M.addEventListener(p,function(t){function o(){return void 0===vf.vfXApiKey||null===vf.vfXApiKey?(vfAudioPlayer.configure(vfAlternativeResponse.unavailable),vfAudioPlayer.play(),!1):H?(e(),vfAudioRecorder.stop(),vfStopAudio(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),M.classList.remove("listening"),T.placeholder=vfMessages.transcribeText,vfAudioRecorder.getBuffers(function(e){vfSttLanguageContext.gcp.stt?vfAudioRecorder.exportMonoWAV(function(e){vfAudioRecorder.convertBlobToBase64(e).then(function(e){vfGcpStt(e).then(function(e){T.value=e,vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){}),vfAudioPlayer.play(),setTimeout(()=>{I.submit()},2e3)}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask})}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask})}):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T.placeholder=vfMessages.ask)}),void(H=!1)):(M.classList.add("listening"),t.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),K="",H=!0,vfAudioRecorder.clear(),vfAudioRecorder.record(M),e(),void(window.vfMicTimeoutIdentifier=setTimeout(function(){let e=M.classList;e&&e.contains("listening")&&M.click()},u)))}(!0===vfClientInfo.ios||vfClientInfo.iosSafari&&!vfClientInfo.chrome&&!vfClientInfo.firefox||vfClientInfo.windows&&vfClientInfo.firefox)&&(vfAudioPlayer.configure(vfSilenceSoundPath),vfAudioPlayer.play()),!0!==i(M.getAttribute("id"),M)&&(vfAudioRecorder&&vfAudioContext?o():vfInitAudio(function(e){if(!vfAudioRecorder||!vfAudioContext)return T.placeholder=vfMessages.micNotAccessible,!1;o()}))},!1)}function f(e,t){if(void 0===e||null==e||0==e.length)return!1;let i=document.querySelector(e);if(i.classList)i.classList.toggle(t);else{let e=i.className.split(" "),o=e.indexOf(t);o>=0?e.splice(o,1):(e.push(t),i.className=e.join(" "))}}function c(){1==vfIsSingleClick?(f(".vf-widget-toggle-button","vf-toggle-btn-mic"),f(".vf-widget-toggle-button","vf-toggle-btn-mic"),f(".vf-widget-toggle-button","vf-widget-active"),f(".vf-widget-toggle-button","vf-widget-visible"),f("#vfWidgetToggleButton","vf-widget-float"),f(".vf-widget-button","vf-widget-visible")):(f(".vf-widget-toggle-button","vf-toggle-btn-mic"),f(".vf-widget-toggle-button","vf-toggle-btn-close"),f(".vf-widget-toggle-button","vf-widget-active"),f(".vf-widget-toggle-button","vf-widget-visible"),f("#vfWidgetToggleButton","vf-widget-float"),f(".vf-widget-chat-wrapper","vf-widget-visible"),f(".vf-widget-button","vf-widget-visible"))}let u=null,d=2e4;void 0!==vf.vfMicListenTimeoutDuration&&null!==vf.vfMicListenTimeoutDuration?(u=parseInt(vf.vfMicListenTimeoutDuration),u=isNaN(u)?8:u):u=8,u=u<8?8:u,u=u>20?20:u,u*=1e3,e();var v=["text","email","search"],p="click",g=navigator.userAgent.toLowerCase(),A=g.indexOf("android")>-1,y=document.querySelectorAll("form");let m=null;[].forEach.call(y,function(o,n){try{var l=o.getAttribute("style"),r=null!=l&&""!==l.trim();l=r?l+";":"",o.setAttribute("style",l+"display: block !important"),o.classList.add("vf-sanitize-form-wrapper");let s=!1;var a=!1;let f=o.getAttribute("role")||"",c=o.classList,g=o.querySelectorAll('input:not([type=hidden]):not([style*="none"]), button[type=submit], textarea:not([style*="none"])');("search"===f.toLowerCase()||c.contains("searchform")||c.contains("search_form")||c.contains("search-form")||c.contains("searchForm"))&&(s=!0),0==n&&(m=o),[].forEach.call(g,function(n,r){var f=null;let c=n.getAttribute("type")||"",g=n.className||"",y=n.getAttribute("id")||null,m=n.tagName;y&&null!==y&&(y=y.toLowerCase()),g&&null!==g&&(g=g.toLowerCase());let h=!1;-1===g.indexOf("datepicker")&&-1===g.indexOf("date")&&"datepicker"!==y&&"date"!==y||(h=!0),-1===g.indexOf("datepicker")&&"datepicker"!==y&&-1!==g.search(/validat|candidat/gi)&&(h=!1),"text"===c&&-1!==g.search(/email/gi)&&(c="email");let b="textarea"===m.toLowerCase();if(1==b?d:u,v.includes(c)&&0==h||1==b)f=n;else if("submit"==c.toLowerCase()&&(o.addEventListener("submit",function(e){1==a&&e.preventDefault()},!1),!0===s))try{let e=n.querySelectorAll("img, svg");for(let t=0;t<e.length;t++){let i=e[t];i.classList.add("vf-hide-element")}}catch(e){}if(null===f)return!0;if(0==vfIsMicInputField){var P=f.placeholder;if(1==P.includes("{allow_stt}"))f.placeholder=P.replace("{allow_stt}","");else if(0!=vfDisableSearchField||1!=s)return!0}else{P=f.placeholder;1==P.includes("{allow_stt}")&&(f.placeholder=P.replace("{allow_stt}",""))}var w=document.createElement("button");w.setAttribute("type","button"),w.setAttribute("class","voice-forms-button"),w.setAttribute("id","voice-forms-button"+r),w.appendChild(document.createTextNode(voice_forms.button_message));var C=document.createElement("img");C.setAttribute("src",vf.vfImagesPath+"vf_mic.svg"),C.setAttribute("class","vf-mic-image"),w.appendChild(C);var R=t(f.offsetHeight),L=t(.8*R);0==t(L)&&(R=L=35);var M=t(.1*R);!0===b&&(M=10,L=35);var x="top: "+M+"px; ";x+="height: "+L+"px !important; ",x+="width: "+L+"px !important; ",x+="z-index: 999 !important; margin-left: 3px !important; border-radius: 50% !important; border: 2px solid #ffff !important;",w.setAttribute("style",x);var S=document.createElement("div");S.setAttribute("style",l+"display: inline-block !important");let k=window.getComputedStyle(f);S.setAttribute("class","vf-mic-band"),S.setAttribute("onclick","return false"),S.style.width=k.width,f.insertAdjacentElement("beforebegin",S);var I=f.parentNode.nodeName;null!=I&&0!=I.length&&(I=I.toLowerCase(),"form"!=I&&(f.parentNode.style.zIndex=1)),S.appendChild(f),f.insertAdjacentElement("beforebegin",w),f.setAttribute("style",l+"width: 100% !important;"),f.classList.add("vf-mic-band");var T,E="";if("webkitSpeechRecognition"in window&&!0===vfClientInfo.chrome){var N=new webkitSpeechRecognition;function B(){if(a=!1,!T)if(w.classList.remove("listening"),w.style.setProperty("color","white"),void 0!==E&&0!=E.length){let e=E;"email"===c&&(e=vfFormatEmail(e));let t=e&&null!==e?e:E;!0===b?f.value+=" "+t:f.value=t,1==s&&(vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){o.submit()}),vfAudioPlayer.play())}else f.placeholder=vfMessages.ask}N.continuous=!0,N.interimResults=!0,N.onstart=function(){a=!0},N.onerror=function(e){w.classList.remove("listening"),a=!1,"no-speech"==e.error&&(f.placeholder=vfMessages.unableToHear,vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),T=!0),"audio-capture"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),f.placeholder=vfMessages.micNotAccessible,T=!0),"not-allowed"==e.error&&(vfAudioPlayer.configure(vfAlternativeResponse.micConnect),vfAudioPlayer.play(),f.placeholder=vfMessages.browserDenyMicAccess,w.style.setProperty("color","white"),T=!0)},N.onend=function(){A&&B()},N.onresult=function(e){let t="";if(void 0===e.results)return N.onend=null,N.stop(),f.placeholder=vfMessages.unableToHear,vfAudioPlayer.configure(vfAlternativeResponse.micConnect),void vfAudioPlayer.play();for(var i=e.resultIndex;i<e.results.length;++i)e.results[i].isFinal?(E=e.results[i][0].transcript,0==A&&(B(),N.stop())):!1===b&&(t+=e.results[i][0].transcript,f.value=t)},w.addEventListener(p,function(t){!0!==i(w.getAttribute("id"))&&(a?(e(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),0==A&&(B(),N.stop())):(w.classList.add("listening"),t.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),E="",!1===b&&(f.value=""),a=!0,N.lang=vfSttLanguageContext.gcp.stt?vfSttLanguageContext.gcp.langCode:"en-US",N.start(),T=!1,e(),window.vfMicTimeoutIdentifier=setTimeout(function(){let e=w.classList;e&&e.contains("listening")&&w.click()},"textarea"==f.tagName.toLowerCase()?d:u)))})}else w.addEventListener(p,function(t){function n(){return void 0===vf.vfXApiKey||null===vf.vfXApiKey?(vfAudioPlayer.configure(vfAlternativeResponse.unavailable),vfAudioPlayer.play(),!1):a?(e(),vfAudioRecorder.stop(),vfStopAudio(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),w.classList.remove("listening"),w.style.setProperty("color","white"),f.placeholder=vfMessages.transcribeText,vfAudioRecorder.getBuffers(function(e){vfSttLanguageContext.gcp.stt?vfAudioRecorder.exportMonoWAV(function(e){vfAudioRecorder.convertBlobToBase64(e).then(function(e){vfGcpStt(e).then(function(e){let t=e;"email"===c&&(t=vfFormatEmail(t));let i=t&&null!==t?t:e;!0===b?f.value+=" "+i:f.value=i,1==s&&(vfAudioPlayer.configure(vfAlternativeResponse.basic,function(){o.submit()}),vfAudioPlayer.play())}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),f.placeholder=vfMessages.ask})}).catch(function(e){vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),f.placeholder=vfMessages.ask})}):(vfAudioPlayer.configure(vfAlternativeResponse.notAudible),vfAudioPlayer.play(),f.placeholder=vfMessages.ask)}),void(a=!1)):(w.classList.add("listening"),t.preventDefault(),vfAudioPlayer.isPlaying()&&vfAudioPlayer.stop(),f.value=E="",a=!0,vfAudioRecorder.clear(),vfAudioRecorder.record(w,f.tagName),e(),void(window.vfMicTimeoutIdentifier=setTimeout(function(){let e=w.classList;e&&e.contains("listening")&&w.click()},"textarea"==f.tagName.toLowerCase()?d:u)))}(!0===vfClientInfo.ios||vfClientInfo.iosSafari&&!vfClientInfo.chrome&&!vfClientInfo.firefox||vfClientInfo.windows&&vfClientInfo.firefox)&&(vfAudioPlayer.configure(vfSilenceSoundPath),vfAudioPlayer.play()),!0!==i(w.getAttribute("id"))&&(vfAudioRecorder&&vfAudioContext?n():vfInitAudio(function(e){if(!vfAudioRecorder||!vfAudioContext)return alert(vfMessages.cantAccessMicrophone),!1;n()}))},!1)}),o.setAttribute("style",l)}catch(e){}});let h=document.createDocumentFragment(),b=document.createElement("div"),P="vf-widget-wrapper-middle-right",w="vf-widget-chat-wrapper-middle-right",C=vf.vfSelectedMicPosition?vf.vfSelectedMicPosition.toLowerCase():"middle right";switch(C){case"middle left":P="vf-widget-wrapper-middle-left",w="vf-widget-chat-wrapper-middle-left";break;case"top right":P="vf-widget-wrapper-top-right",w="vf-widget-chat-wrapper-top-right";break;case"top left":P="vf-widget-wrapper-top-left",w="vf-widget-chat-wrapper-top-left";break;case"bottom right":P="vf-widget-wrapper-bottom-right",w="vf-widget-chat-wrapper-bottom-right";break;case"bottom left":P="vf-widget-wrapper-bottom-left",w="vf-widget-chat-wrapper-bottom-left";break;default:P="vf-widget-wrapper-middle-right",w="vf-widget-chat-wrapper-middle-right"}b.setAttribute("class","vf-widget-wrapper "+P);let R=document.createElement("div");R.setAttribute("class","vf-widget-chat-wrapper "+w);let L=document.createElement("div");L.setAttribute("class","vf-widget-field");let M=document.createElement("a");M.setAttribute("id","vfWidgetMic"),M.setAttribute("class","vf-widget-button");let x=document.createElement("img");x.setAttribute("src",vf.vfImagesPath+"vf-widget-mic-black.svg"),M.appendChild(x);let S=document.createElement("a");S.setAttribute("id","vfWidgetSearchBtn");let k=document.createElement("button");k.setAttribute("class","vf-widget-form-submit-btn"),k.setAttribute("type","submit"),k.setAttribute("alt","Go"),k.setAttribute("title","Search"),S.appendChild(k);let I=document.createElement("form");I.setAttribute("class","vf-widget-form"),null!==m?(I.action=m.action,I.method=m.method):(I.action=vfGetCurrentHostURL()+"/",I.method="get");let T=document.createElement("input");T.setAttribute("id","vfWidgetSearch"),T.setAttribute("class","vf-widget-search vf-widget-search-text"),T.setAttribute("name","vf-widget-search"),T.setAttribute("placeholder",vfWidgetMessages.placeholder),T.setAttribute("name","s"),I.appendChild(T),I.appendChild(S),L.appendChild(M),L.appendChild(I),R.appendChild(L);let E=document.createElement("a"),N=document.createElement("div"),B=document.createElement("span");B.setAttribute("id","vfWidgetPulseEffect"),vf.vfFloatingMic&&"yes"===vf.vfFloatingMic&&(E.setAttribute("id","vfWidgetToggleButton"),E.setAttribute("class","vf-widget-button"),N.setAttribute("class","vf-widget-icon vf-widget-toggle-button vf-toggle-btn-mic"),E.appendChild(N)),b.appendChild(R),b.appendChild(B),b.appendChild(E),h.appendChild(b),document.body.appendChild(h),E.addEventListener("click",function(e){c()});let D,K="",H=!1,F="";1==vfIsElementor&&n(),1==vfIsSingleClick?(a(),r("single")):(s(),r("double"))})()});